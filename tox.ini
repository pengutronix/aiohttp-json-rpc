[tox]
envlist=py35-django18

[tox:jenkins]
envlist=py35-django{18,111}

[testenv]
ignore_errors=True
setenv =
    DJANGO_SETTINGS_MODULE=django_project.settings

deps =
    pytest
    pytest-asyncio
    pytest-django
    pytest-catchlog
    pytest-cov
    flake8

    django18: Django>=1.8,<1.9
    django111: Django>=1.11,<1.12
    aiohttp-wsgi

    {toxinidir}/tests/django_project

commands =
    pytest tests \
        -v --tb=long \
        --cov={envsitepackagesdir}/aiohttp_json_rpc \
        --cov-report term \
        --cov-report html:htmlcov

    flake8 aiohttp_json_rpc tests examples \
        --exclude=env
